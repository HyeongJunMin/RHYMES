<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Preview">
	<!-- previewlist -->
	<select id="getPreviewList" parameterType="com.rhymes.app.Store.model.DetailParam"  resultType="com.rhymes.app.Store.model.PreviewDto">
      SELECT  A.SEQ,A.PD_SEQ,A.USERID,A.TITLE,A.CONTENT,A.LIKES_CNT,A.RDATE,
				D.P_NAME AS P_NAME
				FROM RHY_PRODUCT_REVIEW A,RHY_PAYMENT_DETAILS B, RHY_STORE_STOCK C, RHY_STORE_PRODUCT D
				WHERE B.S_SEQ = C.STOCK_SEQ AND C.P_SEQ = D.P_SEQ  AND A.PD_SEQ = B.SEQ AND C.P_SEQ=#{p_seq}
		
    </select>
	<!--pqna 글의 총 수  -->
	<select id="getPreviewCount" parameterType="com.rhymes.app.Store.model.DetailParam"
		resultType="java.lang.Integer">
		SELECT IFNULL(COUNT(*), 0)AS CNT
		FROM RHY_PRODUCT_REVIEW
		
	</select>
</mapper>